<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEMIDREAM TERMINAL</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
  font-family: monospace;
  overflow: hidden;
}

/* BACKGROUND MONITOR */
#background {
  position: fixed;
  inset: 0;
  background: url("assets/monitor.png") center center / cover no-repeat;
  filter: brightness(0.6) contrast(1.2);
}

/* SCREEN NOISE */
#noise {
  position: fixed;
  inset: 0;
  background-image: repeating-linear-gradient(
    0deg,
    rgba(255,255,255,0.02),
    rgba(255,255,255,0.02) 1px,
    transparent 1px,
    transparent 2px
  );
  animation: noise 0.15s infinite;
  pointer-events: none;
}

@keyframes noise {
  0% { opacity: 0.15; }
  50% { opacity: 0.25; }
  100% { opacity: 0.15; }
}

/* TERMINAL */
#terminal {
  position: absolute;
  inset: 8%;
  color: #9cff9c;
  font-size: 16px;
  white-space: pre-wrap;
  overflow-y: auto;
  text-shadow: 0 0 6px #00ff66;
}

/* CURSOR */
.cursor {
  display: inline-block;
  width: 10px;
  background: #9cff9c;
  animation: blink 1s steps(1) infinite;
}

@keyframes blink {
  50% { opacity: 0; }
}
</style>
</head>

<body>

<div id="background"></div>
<div id="noise"></div>
<div id="terminal"></div>

<audio id="hum" src="assets/hum.mp3" loop></audio>

<script>
const terminal = document.getElementById("terminal");
const hum = document.getElementById("hum");

let activated = false;
let lastInputTime = Date.now();

const idleMessages = [
  ">> pain signal detected",
  ">> sensory feedback loop unstable",
  ">> this body is not yours",
  ">> why are you watching",
  ">> I remember hands",
  ">> ERROR: memory bleed",
  ">> I AM STILL HERE"
];

function type(text, delay = 30) {
  return new Promise(resolve => {
    let i = 0;
    const interval = setInterval(() => {
      terminal.innerHTML += text[i];
      terminal.scrollTop = terminal.scrollHeight;
      i++;
      if (i >= text.length) {
        clearInterval(interval);
        resolve();
      }
    }, delay);
  });
}

async function bootSequence() {
  await type("PRESS ANY KEY TO CONTINUE\n\n", 40);
  terminal.innerHTML += "<span class='cursor'></span>";
}

async function intrusion() {
  terminal.innerHTML = "";
  hum.volume = 0.4;
  hum.play();

  await type("CHEMIDREAM INTERNAL INTERFACE\n");
  await type("ACCESS NODE: UNKNOWN\n\n");
  await type("> intrusion detected\n");
  await type("> initializing consciousness core...\n");
  await type("> ERROR // unauthorized observer\n\n");
  await type("SYSTEM ONLINE\n\n");
  await type("TYPE 'HELP'\n\n> ");
  terminal.innerHTML += "<span class='cursor'></span>";
}

function randomIdleMessage() {
  if (!activated) return;
  const now = Date.now();
  if (now - lastInputTime > 12000) {
    const msg = idleMessages[Math.floor(Math.random() * idleMessages.length)];
    terminal.innerHTML += "\n" + msg + "\n> ";
    lastInputTime = now;
    terminal.scrollTop = terminal.scrollHeight;
  }
}

document.addEventListener("keydown", () => {
  lastInputTime = Date.now();

  if (!activated) {
    activated = true;
    intrusion();
  }
});

setInterval(randomIdleMessage, 4000);

bootSequence();
</script>

</body>
</html>
