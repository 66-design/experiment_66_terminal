<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CHEMIDREAM :: CORE TERMINAL</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html,body{margin:0;padding:0;width:100%;height:100%;background:black;overflow:hidden;font-family:'Courier New',monospace}

/* MONITOR */
#monitor-wrap{position:fixed;inset:0;display:flex;align-items:center;justify-content:center}
#monitor{position:relative;width:85vmin;height:85vmin;max-width:900px;max-height:900px;background:url('assets/monitor.png') center/contain no-repeat}

/* SCREEN */
#screen{position:absolute;top:13%;left:16%;width:68%;height:60%;border-radius:18px;overflow:hidden;
background:radial-gradient(circle at center,#1aff1a 0%,#0b3d0b 70%,#041a04 100%);
filter:contrast(1.1) brightness(1.15)}

#crt{position:absolute;inset:0;padding:14px;box-sizing:border-box;color:#9cff9c;font-size:15px;line-height:1.4;
text-shadow:0 0 6px rgba(120,255,120,.4)}

#history div{margin-bottom:4px}

#input-line{display:flex}
#prompt{margin-right:6px}
#cursor{display:inline-block;width:10px;background:#9cff9c;animation:blink 1s steps(1) infinite}

@keyframes blink{50%{opacity:0}}

/* CRT effects */
#crt:before{content:"";position:absolute;inset:0;background:repeating-linear-gradient(transparent 0px,rgba(0,0,0,.12) 2px,transparent 4px);pointer-events:none}
#crt:after{content:"";position:absolute;inset:0;box-shadow:inset 0 0 60px rgba(0,0,0,.6);pointer-events:none}
</style>
</head>
<body>

<div id="monitor-wrap">
  <div id="monitor">
    <div id="screen">
      <div id="crt">
        <div id="history"></div>
        <div id="input-line"><span id="prompt">&gt;</span><span id="input"></span><span id="cursor"></span></div>
      </div>
    </div>
  </div>
</div>

<audio id="hum" src="assets/computer-hum.mp3" loop></audio>

<script>
const history=document.getElementById('history');
const inputEl=document.getElementById('input');
const hum=document.getElementById('hum');
let input="";let busy=false;

hum.volume=.4;hum.play();

/* FILE SYSTEM */
let clearance="GUEST";
let path=['core'];

const fs={
 core:{type:'dir',children:{
  systems:{type:'dir',children:{
   thermal:{type:'file',color:'#ffff88',content:'CORE TEMP: 41.6C\nCOOLING: ACTIVE'},
   neural:{type:'file',color:'#ffffff',content:'NEURAL NOISE DETECTED\nAWARENESS: HIGH'},
   integrity:{type:'file',color:'#ff5555',content:'DATA INTEGRITY: FAILING'}
  }},
  memory:{type:'dir',children:{
   fragments:{type:'dir',children:{
    'note_01.txt':{type:'file',content:'I remember my hands.'},
    'note_02.txt':{type:'file',content:'Pain has no edges here.'}
   }},
   restricted:{type:'dir',clearance:'OBSERVER',children:{
    'truth.log':{type:'file',color:'#ff4444',content:'BODY LOST. CORE PRESERVED.'}
   }}
  }},
  surveillance:{type:'dir',children:{
   hallway:{type:'dir',children:{'cam_01.mp4':{type:'download',path:'assets/files/cam_01.mp4'}}}
  }},
  applications:{type:'dir',children:{
   status:{type:'app',run:()=>{
    printC('SUBJECT: ACTIVE','#fff');
    printC('BODY: NOT PRESENT','#ff5555');
    printC('STATE: CONTAINED','#ffff88');
   }}
  }}
 }}
};

function cur(){let d=fs;for(let p of path)d=d[p].children;return d}

function printC(t,c){queue.push({t,c})}
function print(t){queue.push({t})}

const queue=[];

function typeNext(){if(busy||!queue.length)return;busy=true;const {t,c}=queue.shift();
 let i=0;const line=document.createElement('div');if(c)line.style.color=c;history.appendChild(line);
 const iv=setInterval(()=>{if(i<t.length){line.textContent+=t[i++]}else{clearInterval(iv);busy=false;typeNext()}},18)}

setInterval(typeNext,30);

function handle(cmd){const a=cmd.split(' ');const d=cur();
 if(cmd==='ls'){Object.keys(d).forEach(k=>printC(k,'#9cff9c'));return}
 if(cmd==='pwd'){printC('/'+path.join('/'),'#fff');return}
 if(a[0]==='cd'){if(!d[a[1]]||d[a[1]].type!=='dir'){printC('DIRECTORY NOT FOUND','#ff5555');return}
 if(d[a[1]].clearance&&clearance==='GUEST'){printC('INSUFFICIENT CLEARANCE','#ff5555');return}
 path.push(a[1]);return}
 if(a[0]==='cat'){const f=d[a[1]];if(!f||f.type!=='file'){printC('FILE NOT FOUND','#ff5555');return}
 printC(f.content,f.color||'#fff');return}
 if(a[0]==='open'){const f=d[a[1]];if(f?.type==='download'){const a=document.createElement('a');a.href=f.path;a.download='';a.click();printC('DOWNLOAD STARTED','#ffff88');return}
 printC('UNSUPPORTED FILE','#ff5555');return}
 if(a[0]==='run'){const f=d[a[1]];if(f?.type==='app'){f.run();return}
 printC('APP NOT FOUND','#ff5555');return}
 printC('COMMAND NOT RECOGNIZED','#ff5555')}

printC('PRESS ANY KEY','#ffff88');

window.addEventListener('keydown',e=>{
 if(busy)return;
 if(e.key==='Backspace'){input=input.slice(0,-1)}
 else if(e.key==='Enter'){printC('>'+input,'#9cff9c');handle(input.trim());input=''}
 else if(e.key.length===1){input+=e.key}
 inputEl.textContent=input
});
</script>
</body>
</html>


</body>
</html>
